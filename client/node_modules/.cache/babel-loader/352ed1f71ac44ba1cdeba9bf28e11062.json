{"ast":null,"code":"import { INCREMENT_CELL, REMOVE_ROW, ADD_ROW, SET_NEAREST_IDS, RESET_NEAREST_IDS, SET_SETTINGS, RESET_SETTINGS } from \"../action_types\";\nimport { createMatrix, rebuildMatrix, addRows } from \"./matrixReducer/building\";\nimport defaultState from \"./matrixReducer/defaultState\";\nconst initialState = defaultState;\n\nconst sortData = data => {\n  if (data.length > 0) {\n    return data.flat().sort((a, b) => a.value - b.value);\n  }\n}; //find nearest values functions\n\n\nconst checkTargetValueIsLowest = (sortedData, targetId) => {\n  if (sortedData.indexOf(sortedData.find(item => item.id === targetId)) === 0) {\n    return true;\n  }\n};\n\nconst checkTargetValueIsBiggest = (sortedData, targetId) => {\n  if (sortedData.indexOf(sortedData.find(item => item.id === targetId)) === sortedData.length - 1) {\n    return true;\n  }\n};\n\nconst getNearestIdsOfLowestValue = (sortedData, cellsCount) => {\n  return sortedData.slice(1, cellsCount + 1).map(item => item.id);\n};\n\nconst getNearestIdsOfBiggestValue = (sortedData, cellsCount) => {\n  return sortedData.slice(-cellsCount - 1, -1).map(item => item.id);\n};\n\nconst getNearestId = (sortedData, targetId) => {\n  const indexOfTargetId = sortedData.indexOf(sortedData.find(item => item.id === targetId));\n  const prevItem = sortedData[indexOfTargetId - 1];\n  const nextItem = sortedData[indexOfTargetId + 1];\n  const currentItem = sortedData[indexOfTargetId];\n  const prevDiff = Math.abs(currentItem.value - prevItem.value);\n  const nextDiff = Math.abs(nextItem.value - currentItem.value);\n  const nearestItem = prevDiff < nextDiff ? prevItem : nextItem;\n  return nearestItem.id;\n};\n\nconst findNearestIds = (sortedData, targetId, cellsCount, ids = [], step = 0) => {\n  if (step < cellsCount) {\n    if (checkTargetValueIsLowest(sortedData, targetId)) {\n      ids.push(getNearestIdsOfLowestValue(sortedData, cellsCount - step));\n      return ids.flat();\n    } else if (checkTargetValueIsBiggest(sortedData, targetId)) {\n      ids.push(getNearestIdsOfBiggestValue(sortedData, cellsCount - step));\n      return ids.flat();\n    } else {\n      const id = getNearestId(sortedData, targetId);\n      ids.push(id);\n      sortedData = sortedData.filter(item => item.id !== id);\n      step++;\n      return findNearestIds(sortedData, targetId, cellsCount, ids, step);\n    }\n  }\n\n  return ids;\n};\n\nconst getIds = (sortedData, cellsCount, targetId) => {\n  const targetValue = sortedData.find(item => item.id === targetId).value;\n  const sameValueIds = sortedData.filter(item => item.value === targetValue && item.id !== targetId).map(item => item.id);\n\n  if (sameValueIds.length > 0) {\n    sortedData = sortedData.filter(item => !sameValueIds.includes(item.id));\n  }\n\n  const nearestIds = findNearestIds(sortedData, targetId, cellsCount);\n  return {\n    sameValueIds,\n    ids: nearestIds\n  };\n};\n\nconst incrementDataCell = (data, id) => {\n  let newData = [...data];\n  newData.find(row => row.find(item => item.id === id ? item.value++ : null));\n  return newData;\n};\n\nconst matrixReducer = (state = initialState, action) => {\n  console.log(state);\n\n  switch (action.type) {\n    case SET_SETTINGS:\n      let data = [...state.data];\n      const newSettings = { ...action.settings\n      };\n\n      if (state.data.length === 0) {\n        data = createMatrix(newSettings.rowsCount, newSettings.columnsCount);\n      } else if (state.settings.rowsCount !== newSettings.rowsCount || state.settings.columnsCount !== newSettings.columnsCount) {\n        data = rebuildMatrix(state.data, state.settings, newSettings);\n      }\n\n      return { ...state,\n        data,\n        sortedData: sortData(data),\n        settings: newSettings\n      };\n\n    case RESET_SETTINGS:\n      return {\n        defaultState\n      };\n\n    case ADD_ROW:\n      return { ...state,\n        settings: { ...state.settings,\n          rowsCount: state.data.length\n        },\n        data: addRows([...state.data], 1, state.settings.columnsCount),\n        sortedData: sortData(state.data)\n      };\n\n    case REMOVE_ROW:\n      return { ...state,\n        settings: { ...state.settings,\n          rowsCount: state.data.length\n        },\n        data: state.data.filter((row, index) => index !== action.rowIndex),\n        sortedData: sortData(state.data)\n      };\n\n    case INCREMENT_CELL:\n      return { ...state,\n        data: incrementDataCell(state.data, action.id),\n        sortedData: sortData(state.data),\n        nearestIds: getIds(state.sortedData, state.settings.cellsCount, action.id)\n      };\n\n    case SET_NEAREST_IDS:\n      if (state.settings.cellsCount) {\n        return { ...state,\n          sortedData: sortData(state.data),\n          nearestIds: getIds(state.sortedData, state.settings.cellsCount, action.id)\n        };\n      } else {\n        return { ...state\n        };\n      }\n\n    case RESET_NEAREST_IDS:\n      if (!!state.nearestIds.ids.length) {\n        return { ...state,\n          nearestIds: {\n            sameValueIds: [],\n            ids: []\n          }\n        };\n      } else {\n        return { ...state\n        };\n      }\n\n    default:\n      return defaultState;\n  }\n};\n\nexport default matrixReducer;","map":{"version":3,"sources":["/home/superproger/workspace/matrix-builder/client/src/redux/reducers/matrixReducer.js"],"names":["INCREMENT_CELL","REMOVE_ROW","ADD_ROW","SET_NEAREST_IDS","RESET_NEAREST_IDS","SET_SETTINGS","RESET_SETTINGS","createMatrix","rebuildMatrix","addRows","defaultState","initialState","sortData","data","length","flat","sort","a","b","value","checkTargetValueIsLowest","sortedData","targetId","indexOf","find","item","id","checkTargetValueIsBiggest","getNearestIdsOfLowestValue","cellsCount","slice","map","getNearestIdsOfBiggestValue","getNearestId","indexOfTargetId","prevItem","nextItem","currentItem","prevDiff","Math","abs","nextDiff","nearestItem","findNearestIds","ids","step","push","filter","getIds","targetValue","sameValueIds","includes","nearestIds","incrementDataCell","newData","row","matrixReducer","state","action","console","log","type","newSettings","settings","rowsCount","columnsCount","index","rowIndex"],"mappings":"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","sourcesContent":["import {\n   INCREMENT_CELL,\n   REMOVE_ROW,\n   ADD_ROW,\n   SET_NEAREST_IDS,\n   RESET_NEAREST_IDS,\n   SET_SETTINGS,\n   RESET_SETTINGS,\n} from \"../action_types\";\nimport { createMatrix, rebuildMatrix, addRows } from \"./matrixReducer/building\";\nimport defaultState from \"./matrixReducer/defaultState\";\n\nconst initialState = defaultState;\nconst sortData = (data) => {\n   if (data.length > 0) {\n      return data.flat().sort((a, b) => a.value - b.value);\n   }\n};\n\n//find nearest values functions\nconst checkTargetValueIsLowest = (sortedData, targetId) => {\n   if (\n      sortedData.indexOf(sortedData.find((item) => item.id === targetId)) === 0\n   ) {\n      return true;\n   }\n};\nconst checkTargetValueIsBiggest = (sortedData, targetId) => {\n   if (\n      sortedData.indexOf(sortedData.find((item) => item.id === targetId)) ===\n      sortedData.length - 1\n   ) {\n      return true;\n   }\n};\nconst getNearestIdsOfLowestValue = (sortedData, cellsCount) => {\n   return sortedData.slice(1, cellsCount + 1).map((item) => item.id);\n};\nconst getNearestIdsOfBiggestValue = (sortedData, cellsCount) => {\n   return sortedData.slice(-cellsCount - 1, -1).map((item) => item.id);\n};\nconst getNearestId = (sortedData, targetId) => {\n   const indexOfTargetId = sortedData.indexOf(\n      sortedData.find((item) => item.id === targetId)\n   );\n   const prevItem = sortedData[indexOfTargetId - 1];\n   const nextItem = sortedData[indexOfTargetId + 1];\n   const currentItem = sortedData[indexOfTargetId];\n   const prevDiff = Math.abs(currentItem.value - prevItem.value);\n   const nextDiff = Math.abs(nextItem.value - currentItem.value);\n   const nearestItem = prevDiff < nextDiff ? prevItem : nextItem;\n   return nearestItem.id;\n};\nconst findNearestIds = (\n   sortedData,\n   targetId,\n   cellsCount,\n   ids = [],\n   step = 0\n) => {\n   if (step < cellsCount) {\n      if (checkTargetValueIsLowest(sortedData, targetId)) {\n         ids.push(getNearestIdsOfLowestValue(sortedData, cellsCount - step));\n         return ids.flat();\n      } else if (checkTargetValueIsBiggest(sortedData, targetId)) {\n         ids.push(getNearestIdsOfBiggestValue(sortedData, cellsCount - step));\n         return ids.flat();\n      } else {\n         const id = getNearestId(sortedData, targetId);\n         ids.push(id);\n         sortedData = sortedData.filter((item) => item.id !== id);\n         step++;\n         return findNearestIds(sortedData, targetId, cellsCount, ids, step);\n      }\n   }\n   return ids;\n};\nconst getIds = (sortedData, cellsCount, targetId) => {\n   const targetValue = sortedData.find((item) => item.id === targetId).value;\n   const sameValueIds = sortedData\n      .filter((item) => item.value === targetValue && item.id !== targetId)\n      .map((item) => item.id);\n   if (sameValueIds.length > 0) {\n      sortedData = sortedData.filter((item) => !sameValueIds.includes(item.id));\n   }\n   const nearestIds = findNearestIds(sortedData, targetId, cellsCount);\n   return { sameValueIds, ids: nearestIds };\n};\nconst incrementDataCell = (data, id) => {\n   let newData = [...data];\n   newData.find((row) =>\n      row.find((item) => (item.id === id ? item.value++ : null))\n   );\n   return newData;\n};\nconst matrixReducer = (state = initialState, action) => {\n   console.log(state);\n   switch (action.type) {\n      case SET_SETTINGS:\n         let data = [...state.data];\n         const newSettings = { ...action.settings };\n         if (state.data.length === 0) {\n            data = createMatrix(\n               newSettings.rowsCount,\n               newSettings.columnsCount\n            );\n         } else if (\n            state.settings.rowsCount !== newSettings.rowsCount ||\n            state.settings.columnsCount !== newSettings.columnsCount\n         ) {\n            data = rebuildMatrix(state.data, state.settings, newSettings);\n         }\n         return {\n            ...state,\n            data,\n            sortedData: sortData(data),\n            settings: newSettings,\n         };\n      case RESET_SETTINGS:\n         return {\n            defaultState,\n         };\n      case ADD_ROW:\n         return {\n            ...state,\n            settings: { ...state.settings, rowsCount: state.data.length },\n            data: addRows([...state.data], 1, state.settings.columnsCount),\n            sortedData: sortData(state.data),\n         };\n      case REMOVE_ROW:\n         return {\n            ...state,\n            settings: { ...state.settings, rowsCount: state.data.length },\n            data: state.data.filter((row, index) => index !== action.rowIndex),\n            sortedData: sortData(state.data),\n         };\n      case INCREMENT_CELL:\n         return {\n            ...state,\n            data: incrementDataCell(state.data, action.id),\n            sortedData: sortData(state.data),\n            nearestIds: getIds(\n               state.sortedData,\n               state.settings.cellsCount,\n               action.id\n            ),\n         };\n      case SET_NEAREST_IDS:\n         if (state.settings.cellsCount) {\n            return {\n               ...state,\n               sortedData: sortData(state.data),\n               nearestIds: getIds(\n                  state.sortedData,\n                  state.settings.cellsCount,\n                  action.id\n               ),\n            };\n         } else {\n            return { ...state };\n         }\n\n      case RESET_NEAREST_IDS:\n         if (!!state.nearestIds.ids.length) {\n            return { ...state, nearestIds: { sameValueIds: [], ids: [] } };\n         } else {\n            return { ...state };\n         }\n      default:\n         return defaultState;\n   }\n};\n\nexport default matrixReducer;\n"]},"metadata":{},"sourceType":"module"}